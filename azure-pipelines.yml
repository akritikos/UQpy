# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

variables:
  pythonVersion: 3.7
  srcDirectory: src

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: UsePythonVersion@0
  displayName: 'Use Python $(pythonVersion)'
  inputs:
    versionSpec: '$(pythonVersion)'
  

- script: |
    pip install -r requirements.txt -U --update-strategy eager
  displayName: 'Install pachages for build'

- bash: find $(srcDirectory) -type f -name "*.py" | xargs pylint
  displayName: "Linting : pylint"

- bash: flake8
  displayName: "Linting: flake8"
  workingDirectory: $(srcDirectory)
