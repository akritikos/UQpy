# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

variables:
  pythonVersion: 3.7
  srcDirectory: src

trigger:
- master

pool:
  vmImage: 'ubuntu-latest'

steps:
- task: UsePythonVersion@0
  displayName: 'Use Python $(pythonVersion)'
  inputs:
    versionSpec: '$(pythonVersion)'
  

- bash: |
   pip install flake8
   pip install pylint
   pip install pytest
   pip install pytest-azurepipelines
   pip install pytest-cov
   pip install wheel
   pip install numpy
   pip install scipy
   pip install matplotlib
   pip install scikit-learn
   pip install fire
  displayName: 'Install pachages for build'

- bash: find $(srcDirectory) -type f -name "*.py" | xargs pylint
  displayName: "Linting : pylint"

- bash: flake8
  condition: always()
  displayName: "Linting: flake8"
  workingDirectory: $(srcDirectory)
